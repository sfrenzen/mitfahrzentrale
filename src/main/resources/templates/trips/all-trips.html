<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<body>

<div layout:fragment="content">

    <div class="page-header mf-header">
        <h1>
            Unsere Fahrten
        </h1>
    </div>
    <h4 th:text="${'Dies sind alle Fahrten von ' + start + ' nach ' + destination + '.'}"></h4>
    <form class="form-inline" th:action="@{'/all-trips/search/'}" method="get">
        <div class="form-group mb-2">
            <input type="text" class="btn-outline-info form-control" placeholder="Abfahrtsort" name="start"
                   th:value="${start}">
        </div>
        <div class="form-group mx-sm-3 mb-2">
            <input type="text" class="btn-outline-info form-control" placeholder="Ankunftsort" name="destination"
                   th:value="${destination}">
        </div>
        <input type="submit" class="btn btn-outline-info mb-2" th:value="Suchen">
    </form>

    <table th:if="${!allTrips.empty}" class="table table-responsive-md table-borderless table-success">
        <tr>
            <th>Start</th>
            <th>Ende</th>
            <th>Date des Trips</th>
            <th>Preis</th>
            <th>Verfuegbare Plaetze</th>
            <th>Pet</th>
            <th>Smoking</th>
            <th>Buchbar</th>
            <th>go to rating</th>
            <th>Average rating</th><!-- Delete Option nur f�r den Owner -->
            <th>First Name</th> <!-- der Vorname nur f�r den Owner gezeigt wird -->
            <th>Options</th><!-- hier wird der Owner gezeigt -->
        </tr>
        <tr th:each="trip :${allTrips}" th:classappend="${trip.bookable}? '':'table table-responsive-md table-dark'">
            <td th:text="${trip.start}"></td>
            <td th:text="${trip.end}"></td>
            <td th:text="${trip.date}"></td>
            <!-- wenn der Preis ==0 dann wird Free erscheien, sonst erscheint der Preis -->
            <td th:text="${trip.price==0}?'Free':${trip.price}"></td>
            <td th:text="${trip.freeSeats}"></td>
            <td th:text="${trip.pet}?'Ja Gerne':'Nein, Danke'"></td>
            <td th:text="${trip.smoking}?'Ja Gerne':'Nein, Danke'"></td>
            <td th:text="${trip.bookable}?'Ja Gerne':'Nein, Danke'"></td>
            <td><a th:href="${'/trips/'+trip.id}"> Here</a></td>
            <td th:text="${trip.averageRatingInText}">Rating</td>
            <td th:text="${trip.getOwner().firstName}"></td>
            <td th:if="${trip.ownedByCurrentUser}">
                <form th:action="@{'/all-trips/delete/'+${trip.id}}" method="post">
                    <input type="submit" class="btn btn-danger" th:value="Delete">
                </form>
            </td>
            <!-- wenn es nicht von dem eingelogten User besetzt und es ist buckbar, wird die Buchungsoption erscheinen -->
            <!--<td th:if="${!trip.ownedByCurrentUser && trip.bookable==true}">-->
            <td th:if="${trip.bookable}">
                <a th:href="${'/trips/book-trip/'+trip.id}" role="button" class="btn btn-info">Buchen</a>
            </td>
        </tr>
    </table>
</div>
</body>
</html>
